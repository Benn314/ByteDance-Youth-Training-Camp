- [ ] 希望学新知识能想学历史一样，听着作者娓娓道来，因...而起，解决了...问题，迭代的原因及过程，同比竞争者有何优势，自身优缺点

# [彻底了解npm——架构、进化史及原理解析](https://juejin.cn/post/7245201923506094140?searchId=20230725213536392558E1A4B81F242684#heading-0)

## SemVer 机制

SemVer（Semantic Versioning）是一种软件版本控制规范，旨在为软件库的版本号提供一致和易于理解的命名约定。这个规范允许开发者和用户快速了解一个软件版本中包含的变化和兼容性信息，以便更好地管理依赖关系和升级决策。

SemVer 的版本号由三个数字组成：`MAJOR.MINOR.PATCH`，如 `2.1.3`。每个数字表示了不同级别的变化：

\1. `MAJOR`（主版本号）：当进行不向后兼容的 API 变更或重大功能改进时，增加主版本号。这意味着旧版本与新版本之间可能存在不兼容的变化。

\2. `MINOR`（次版本号）：当添加向后兼容的新功能时，增加次版本号。这意味着新版本向下兼容旧版本，但可能引入了新的功能或改进。

\3. `PATCH`（补丁版本号）：当进行向后兼容的错误修复或小改动时，增加补丁版本号。这意味着新版本修复了旧版本中的问题，但没有引入新的功能。

按照 SemVer 规范，版本号的递增遵循以下原则：

\- 任何版本初始号都是 `0.1.0`，即第一个公开版本的 `MINOR` 号为 1，`PATCH` 号为 0。
\- 当主版本号增加时，次版本号和补丁版本号都会归零。
\- 当次版本号增加时，补丁版本号归零。
\- 当进行错误修复或补丁时，增加补丁版本号。

举个例子：

\- 从 `1.2.3` 到 `1.3.0`：添加了新功能，向后兼容。
\- 从 `1.2.3` 到 `2.0.0`：进行了不向后兼容的更改，主版本号增加。
\- 从 `1.2.3` 到 `1.2.4`：进行了向后兼容的错误修复，补丁版本号增加。

SemVer 的规范使得软件版本控制更加清晰和可预测，帮助开发者和用户更好地理解软件库的变化和演进。在开发和发布软件时，遵循 SemVer 可以使依赖管理更加可靠，减少意外的兼容性问题，以及使软件升级过程更加可控。

​	

## 依赖不幂等问题

依赖不幂等性问题是指在计算或处理过程中，对于相同输入的依赖操作，在不同的执行过程中可能会产生不同的结果。在幂等性的场景中，多次执行相同的操作不会改变最终的结果，而在不幂等性的场景中，多次执行相同的操作可能会导致不一致的结果。

在计算机科学和分布式系统中，依赖不幂等性可能会导致一系列问题，例如：

1. **并发冲突：** 当多个并发操作对同一个资源进行读写时，由于依赖不幂等性，可能会产生冲突，导致数据的不一致性或错误的结果。

2. **重试问题：** 当依赖操作不是幂等的时候，在进行失败重试时可能会导致重复执行相同的操作，进而可能产生额外的副作用或错误。

3. **事务问题：** 在数据库事务或分布式系统中，如果依赖操作不是幂等的，当事务回滚并重试时，可能会导致不一致的状态。

4. **网络和消息传递：** 在网络通信或消息传递中，由于网络故障或消息丢失，可能会导致依赖操作被重复执行，从而造成数据错误或资源浪费。

解决依赖不幂等性问题的常见方法包括：

- **幂等操作设计：** 在系统设计中，尽量将依赖操作设计成幂等的，使得多次执行相同操作不会改变结果。

- **唯一标识符：** 在请求中使用唯一标识符或请求ID，以避免相同的请求被重复执行。

- **版本控制：** 对于资源的修改操作，使用乐观并发控制或版本控制，确保对于并发修改的情况下，只有最后的修改生效。

- **幂等性检查：** 在执行依赖操作之前，进行幂等性检查，判断该操作是否已经被执行过，如果已经执行，则可以跳过重复操作。

保持依赖操作的幂等性对于系统的正确性和稳定性非常重要，特别是在分布式系统和并发操作的场景中。通过合理的设计和处理，可以有效地解决依赖不幂等性问题，提高系统的可靠性和一致性。

​	

## 机制和策略

在计算机科学和工程领域中，“机制”通常指的是一种操作或过程的实现方法、手段或技术。换句话说，机制描述了如何完成某个功能或目标的具体步骤和规则。

机制和策略是两个重要的概念，它们经常在复杂系统设计和解决问题的过程中一起使用。下面简要介绍一下这两个概念的区别：

1. **机制（Mechanism）：** 机制指的是如何执行、实现或达成某个目标的具体方法和手段。机制是系统中的基础组成部分，它决定了系统的结构和行为。在软件和硬件设计中，机制通常是指具体的算法、数据结构、协议、接口等。机制属于系统的实际实现，与具体的技术和工具密切相关。

2. **策略（Strategy）：** 策略指的是为了实现目标而选择的方案或方法。策略是高层次的决策和规划，它决定了系统的整体设计和运行方式。在软件和管理领域，策略通常是指设计模式、架构、流程规则等。策略与机制相互配合，通过合理的策略来使用具体的机制来达成目标。

总体而言，机制解决了“如何做”的问题，而策略解决了“为什么这样做”的问题。在设计复杂系统时，机制和策略的选择都是关键因素，需要在整体架构的基础上进行综合考虑，以达到高效、可靠、稳健的系统设计。

​	

